{
    "appname": "Application unreachable 12/06/2021",
    "class": [
        "regular_node"
    ],
    "comments": [
        {
            "text": "",
            "tstp": 1586809468.9096167,
            "user_info": {
                "first_name": "Krishna",
                "last_name": "Yadp",
                "org": "DagknowsDemo",
                "role": "Admin",
                "uname": "krishna+dagknowsdemo@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1586809549.9660072,
            "user_info": {
                "first_name": "Krishna",
                "last_name": "Yadp",
                "org": "DagknowsDemo",
                "role": "Admin",
                "uname": "krishna+dagknowsdemo@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1587926635.6490786,
            "user_info": {
                "first_name": "",
                "last_name": "",
                "org": "ec2",
                "role": "Admin",
                "uname": "binu+ec2@kodelounge.com"
            }
        },
        {
            "text": "",
            "tstp": 1588986239.6103125,
            "user_info": {
                "first_name": "",
                "last_name": "",
                "org": "ec2",
                "role": "Admin",
                "uname": "krishna+ec2@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1588986263.5819988,
            "user_info": {
                "first_name": "",
                "last_name": "",
                "org": "ec2",
                "role": "Admin",
                "uname": "krishna+ec2@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1590075269.1664886,
            "user_info": {
                "first_name": "",
                "last_name": "",
                "org": "ec2",
                "role": "Admin",
                "uname": "krishna+ec2@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1590341707.2620006,
            "user_info": {
                "first_name": "Krishna",
                "last_name": "ec2",
                "org": "ec2",
                "role": "Admin",
                "uname": "krishna+ec2@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1590358189.3259723,
            "user_info": {
                "first_name": "Support",
                "last_name": "Sarang",
                "org": "ec2",
                "role": "Techrep",
                "uname": "sarang+support@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1592439605.1810439,
            "user_info": {
                "first_name": "Eng",
                "last_name": "Sarang",
                "org": "ec2",
                "role": "Techrep",
                "uname": "sarang+support@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1620170789.9932406,
            "user_info": {
                "first_name": "SME",
                "last_name": "Sarang",
                "org": "ec2",
                "role": "Admin",
                "uname": "sarang@dagknows.com"
            }
        },
        {
            "text": "",
            "tstp": 1620170898.0357814,
            "user_info": {
                "first_name": "SME",
                "last_name": "Sarang",
                "org": "ec2",
                "role": "Admin",
                "uname": "sarang@dagknows.com"
            }
        }
    ],
    "conv_id": "wXp1-exHoPg5CVe0XC3tSg",
    "currsession": "HnlR51YQibLW8awB",
    "description": "<p>If the instance you are trying to connect to doesn't have a IPv4 address then you can't connect to it! The IPv4 address you are using might not be the address for the instance. Verify that the instance has the IPv4 address.</p><p><br></p><p>First dump the configuration of the cluster into a file</p><p><br></p><p><span class=\"ql-font-monospace\" style=\"color: rgb(0, 102, 204);\">@m1 aws ec2 describe-instances &lt;instance id&gt;</span></p><p><br></p><p>Then check to see if the instance has a public IP address in the \"NetworkInterfaces\" section. And make sure it matches the IP address you are trying to connect to.</p><p><br></p>",
    "evidence": "import subprocess\nfor instance_id in instance_ids:\n    _problem = True\n\n    cmd = \"aws ec2 describe-instances --instance-ids \" + instance_id\n    cmd += \" --query Reservations[*].Instances[*].NetworkInterfaces[*].Association.PublicIp --output=text | wc -l\"\n\n    result = subprocess.check_output(cmd, shell=True)\n\n    if int(result) > 0:\n        _problem = False\n    if _problem:\n        break",
    "evidtype": "Script",
    "msg": "",
    "nodename": {
        "input_params": {
            "instance_ids": "instance_ids"
        },
        "node_func": "Missing a public IPv4 address for the instance"
    },
    "nodetype": "Problem",
    "prevnodename": {
        "node_func": "Missing a public IPv4 address for the instance"
    },
    "privacy_level": "internal",
    "related_convs": [
        [
            "lATmefa-M1v9-sGMA3o5cA",
            "ssh problems"
        ],
        [
            "lQeTkXtTT_SCBkhu9XPr-Q",
            "test1"
        ],
        [
            "48rldxIWsz790SZuwfpGQw",
            "test"
        ],
        [
            "IYNQ5cqmeK0wzggVCd0MLQ",
            "ssh connection timed out"
        ],
        [
            "3iNpP0xD_-JKkQ090_AaFA",
            "Connection timed out"
        ],
        [
            "kh5rLrSaWwPIF9QcGnD8yQ",
            "test"
        ],
        [
            "HHTVkfn8eJVdjtz7crVY-A",
            "ec2 issues"
        ]
    ],
    "res": "<p><br></p>",
    "restype": "Description",
    "state": "approved",
    "tags": {
        "_dag": "Connectivity",
        "automatable": "yes",
        "automatable-diagnose": "yes",
        "automatable-resolve": "yes",
        "difficulty": "medium",
        "newtag": "someval"
    },
    "node_id": "FK2iTpUrbnLqAYBQ",
    "metadata": {
        "create_tstp": 1662428424.407125,
        "create_username": "info@dagknows.com"
    }
}